"use strict";(self.webpackChunk_06_3_nuiweb_cra=self.webpackChunk_06_3_nuiweb_cra||[]).push([[857],{3857:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var r=t(4165),o=t(5861),a=t(885),c=t(337),i=t(4214),s=t(7462),l=t(5987),d=t(7313),u=t(3061),p=t(6455),h=t(2399),f=(0,h.Z)(d.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),m=(0,h.Z)(d.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),x=t(3644),v=(0,h.Z)(d.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),k=t(9685),b=t(454),y=d.createElement(m,null),Z=d.createElement(f,null),g=d.createElement(v,null),w=d.forwardRef((function(e,n){var t=e.checkedIcon,r=void 0===t?y:t,o=e.classes,a=e.color,c=void 0===a?"secondary":a,i=e.icon,h=void 0===i?Z:i,f=e.indeterminate,m=void 0!==f&&f,x=e.indeterminateIcon,v=void 0===x?g:x,b=e.inputProps,w=e.size,j=void 0===w?"medium":w,C=(0,l.Z)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),E=m?v:h,S=m?v:r;return d.createElement(p.Z,(0,s.Z)({type:"checkbox",classes:{root:(0,u.Z)(o.root,o["color".concat((0,k.Z)(c))],m&&o.indeterminate),checked:o.checked,disabled:o.disabled},color:c,inputProps:(0,s.Z)({"data-indeterminate":m},b),icon:d.cloneElement(E,{fontSize:void 0===E.props.fontSize&&"small"===j?j:E.props.fontSize}),checkedIcon:d.cloneElement(S,{fontSize:void 0===S.props.fontSize&&"small"===j?j:S.props.fontSize}),ref:n},C))})),j=(0,b.Z)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,x.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,x.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(w),C=t(3386),E=(0,h.Z)(d.createElement("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay"),S=(0,h.Z)(d.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),z=t(6573),V=t(6417),F=(0,C.Z)({root:{padding:"12px 40px"},reload:{alignSelf:"center",marginLeft:20,color:"blue",cursor:"pointer","&> :hover":{color:"#59F"}},message:{borderRadius:8,backgroundColor:"#EEEEEE80",padding:"8px 24px",width:"fit-content",color:"#888"},error:{borderRadius:8,padding:"8px 24px",width:"fit-content",backgroundColor:"#FFEEDD80",color:"red",whiteSpace:"break-spaces"},userrow:{display:"flex",gap:20,alignItems:"center"}}),H=function(e){var n=e.index,t=e.name,r=e.value,o=e.handleSubmit,c=(0,d.useState)(r),s=(0,a.Z)(c,2),l=s[0],u=s[1];return(0,V.jsx)(i.Z,{name:t,id:t+"-"+n,onChange:function(e){return function(e){console.log("handleChange"),console.log(e.target.value),u(e.target.value)}(e)},onKeyPress:function(e){"Enter"===e.key&&o({index:n,key:t,value:l})},onBlur:function(e){r!==l&&o({index:n,key:t,value:l})},title:r,value:l,InputLabelProps:{style:{color:"#AAF"}},fullWidth:!1,autoFocus:!1,style:{background:r===l?"":"yellow"}})},I=function(e){var n=e.index,t=e.checked,r=e.handleSubmit,o=(0,d.useState)("1"===t),c=(0,a.Z)(o,2),i=c[0],s=c[1];return(0,V.jsx)(j,{checked:i,onChange:function(){s(!i),console.log(!i,t),r({index:n,key:"status",value:i?"0":"1"})}})},M=function(){var e=(0,d.useState)([]),n=(0,a.Z)(e,2),t=n[0],i=n[1],s=(0,d.useState)(""),l=(0,a.Z)(s,2),u=l[0],p=l[1],h=F(),f=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.Z.get("/api/open");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){console.log("useEffect"),m()}),[]);var m=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.Z.get("/api/users");case 2:n=e.sent,i(n.data),n.data.map((function(e){return e.id})).filter((function(e,n,t){return t.indexOf(e)!==n})).length?p("\u91cd\u8907\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf(\u793e\u54e1\u756a\u53f7)\u304c\u3042\u308a\u307e\u3059\u3002CSV\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n"+n.data.map((function(e){return e.id})).filter((function(e,n,t){return t.indexOf(e)!==n})).join(",")):p("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.Z.put("/api/users",{users:n,payload:t});case 2:m();case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function v(e){t[e.index][e.key]=e.value,x(t,e)}var k=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("addUser"),0!==t.filter((function(e){return""===e.id})).length){e.next=7;break}return e.next=4,z.Z.post("/api/users",{users:t});case 4:m(),e.next=8;break;case 7:alert("\u4e0d\u6b63\u306a\u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3059\u308b\u305f\u3081\u51e6\u7406\u304c\u7d9a\u884c\u3067\u304d\u307e\u305b\u3093\u3002\n\u7a7a\u30c7\u30fc\u30bf\u3092\u524a\u9664\u3059\u308b\u306a\u3069\u4fee\u6b63\u3092\u3057\u3066\u304f\u3060\u3055\u3044\u3002");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("deleteUser"),!window.confirm("\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")){e.next=8;break}return console.log({users:t,index:n}),e.next=5,z.Z.delete("/api/users",{data:{users:t,index:n}});case 5:m(),e.next=9;break;case 8:console.log("no!");case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,V.jsxs)("div",{className:h.root,children:[(0,V.jsx)("h1",{children:"Users"}),""!==u&&(0,V.jsx)("div",{className:h.error,children:u}),(0,V.jsxs)("div",{style:{display:"flex"},children:[(0,V.jsxs)("p",{className:h.message,children:["\u30c6\u30ad\u30b9\u30c8\u5165\u529b\u6b04\u306f\u3001\u7de8\u96c6\u5f8c\u306bEnter\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3053\u3068\u3067\u66f4\u65b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002",(0,V.jsx)("br",{}),"CSV\u3092\u76f4\u63a5\u7de8\u96c6\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002",(0,V.jsx)("button",{onClick:f,style:{color:"blue",textDecoration:"underline",border:"none",backgroundColor:"transparent"},children:"CSV\u3092\u958b\u304f"})]}),(0,V.jsx)("div",{className:h.reload,onClick:function(){console.log("reloadUsers"),m()},title:"CSV\u76f4\u63a5\u7de8\u96c6\u5f8c\u306f\u30af\u30ea\u30c3\u30af\u3067\u30c6\u30fc\u30d6\u30eb\u66f4\u65b0",children:(0,V.jsx)(E,{})})]}),(0,V.jsx)("br",{}),(0,V.jsxs)("div",{className:h.userrow,style:{marginBottom:10,borderBottom:"solid 3px #5588FF40",width:"fit-content"},children:[(0,V.jsx)("div",{style:{width:180},children:"No"}),(0,V.jsx)("div",{style:{width:180},children:"Name"}),(0,V.jsx)("div",{style:{width:45},children:"Enable"}),(0,V.jsx)("div",{style:{width:140},children:"Created"}),(0,V.jsx)("div",{style:{width:140},children:"Modified"})]}),t.map((function(e,n){return(0,V.jsxs)("div",{className:h.userrow,children:[(0,V.jsx)(H,{index:n,name:"id",value:e.id,handleSubmit:v}),(0,V.jsx)(H,{index:n,name:"name",value:e.name,handleSubmit:v}),(0,V.jsx)(I,{index:n,checked:e.status,handleSubmit:v}),(0,V.jsx)("div",{style:{width:140},children:e.created}),(0,V.jsx)("div",{style:{width:140},children:e.modified}),(0,V.jsx)(S,{style:{color:"gray"},onClick:function(){return b(n)}})]},n+"-"+e.id)})),(0,V.jsx)("br",{}),(0,V.jsx)(c.Z,{onClick:k,color:"primary",variant:"contained",children:"\u30e6\u30fc\u30b6\u30fc\u8ffd\u52a0"})]})}}}]);